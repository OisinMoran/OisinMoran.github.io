<!DOCTYPE html>
<html>
<head>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#ff8c8c">
<meta name="theme-color" content="#ff8c8c">
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Oisín Moran | Making a Tweet that Quote-Tweets Itself</title>
<link rel="stylesheet" type="text/css" href="main.css" />
</head>
<body>

<h1 style="margin-bottom: 0px;">Making a Tweet that Quote-Tweets Itself</h1>
<p><em>Or the real reason Twitter doesn't want you to have an edit button.</em></p>

<p>
I'll try to leave the pulp in here and keep this as chronological as I can.
</p>

<p>
The original idea to make a tweet that quote tweets itself is from the 28th of May 2020 (as recorded in Evernote), but I think had likely occured to me earlier when considering what ramifications Twitter having an edit button would have—most notably being able to mislead, being able to vandalize someone's timeline post-retweet, and of course being able to edit your tweet to refer to itself.
</p>

<p>
<!-- Fundamentally the challenge is just correctly guessing what ID a given tweet is going to get. -->
This initial note already had some background research done into determining how tweet IDs were generated, with a link to <a href="https://ws-dl.blogspot.com/2019/08/2019-08-03-tweetedat-finding-tweet.html">this article containing a useful breakdown of Twitter's Snowflake IDs</a>, so thanks to the author of that, Nauman Siddique.
</p>

<h3>Anatomy of a Tweet ID</h3>
<p>
Twitter used to use sequential IDs but no longer do.
Public-facing sequential IDs have the drawback of making usage of your platform easy to estimate.
They are also hard to generate in a distributed fashion.
</p>

<p>
From the link above we find that the new Twitter IDs (used for more than just tweets) are composed of three parts: a timestamp, a machine ID, and a sequence number, arranged like so:
</p>

<code><pre>
TIMESTAMP MACHINE ID SEQUENCE NUM
41 BITS   10 BITS    12 BITS
000...000 0000000000 000000000000 
</pre></code>

<p>
These are then just stuck together and interpreted as a decimal number and look something like 1320553050730340354.
</p>

<p>
Brute-forcing the whole thing is not going to work here as there are so many possibilities, but thankfully the largest section is the timestamp, which should be easy enough to guess right.
This will likely just involve finding the delay between my program guessing an ID and Twitter assigning an ID to the generate tweet.
There will always be fluctuations here as we're dealing in milliseconds and both my computer and all of Twitter's system will be under varying loads, but it should be somewhat consistent.
Hopefully then we can just figure the other two out as they are much smaller—having only 1024 and 4096 possibilities, compared to the timestamp's over 2 trillion (that's a lot of milliseconds).
</p>

<p>
I knew I'd likely have to do <em>some</em> spamming as I was not going to get it right on the first go, so created a new account to spare my few but wonderful followers.
</p>

<h3>Why the name?</h3>
<p>
From Wikipedia:</br>
<em>
A quine is a computer program which takes no input and produces a copy of its own source code as its only output.
</em></p>
<p>
So it's only natural that a quinetweet would print its own URL, and thus hopefully quote tweet or retweet itself.
And natually I set the profile photo to one of Quine himself.
</p>

<!-- Expectations -->


<h3>Get API key</h3>
<p>
I signed the new profile up for a <a href="https://developer.twitter.com/">developer account</a> to start tweeting programatically using Twitter's API. And began with their examples using <a href="https://github.com/twitter/twurl">twurl</a>.
</p>

<p>First step is authorization with my shiny new API keys:</p>
<code><pre>
twurl authorize --consumer-key CONSUMER_KEY \
                --consumer-secret CONSUMER_SECRET
</pre></code>

<p>And now we can get straight into tweeting:</p>
<code><pre>
twurl -d 'status=Test tweet using the POST statuses/update endpoint' /1.1/statuses/update.json
</pre></code>
<p>Resulting in our beautiful first tweet:</p>
<blockquote class="twitter-tweet tw-align-center"><p lang="en" dir="ltr">Test tweet using the POST statuses/update endpoint</p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1308911113229209601?ref_src=twsrc%5Etfw">September 23, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>In the returned response there is <em>a lot</em> of information, but we only really care about the ID, in this case 1308911113229209601 which thankfully matches up with what shows up on Twitter's website—they're not lying!</p>
<!-- <code><pre>
{
  "created_at":"Wed Sep 23 23:28:22 +0000 2020",
  "id":1308911113229209601,
  "id_str":"1308911113229209601",
  "text":"Test tweet using the POST statuses\/update endpoint",
  "truncated":false,
  "entities":{
    "hashtags":[
      
    ],
    "symbols":[
      
    ],
    "user_mentions":[
      
    ],
    "urls":[
      
    ]
  },
  "source":"",
  "in_reply_to_status_id":null,
  "in_reply_to_status_id_str":null,
  "in_reply_to_user_id":null,
  "in_reply_to_user_id_str":null,
  "in_reply_to_screen_name":null,
  "user":{
    "id":1308873400757227521,
    "id_str":"1308873400757227521",
    "name":"quinetweet",
    "screen_name":"quinetweet",
    "location":"",
    "description":"",
    "url":null,
    "entities":{
      "description":{
        "urls":[
          
        ]
      }
    },
    "protected":false,
    "followers_count":0,
    "friends_count":0,
    "listed_count":0,
    "created_at":"Wed Sep 23 20:59:00 +0000 2020",
    "favourites_count":0,
    "utc_offset":null,
    "time_zone":null,
    "geo_enabled":false,
    "verified":false,
    "statuses_count":1,
    "lang":null,
    "contributors_enabled":false,
    "is_translator":false,
    "is_translation_enabled":false,
    "profile_background_color":"F5F8FA",
    "profile_background_image_url":null,
    "profile_background_image_url_https":null,
    "profile_background_tile":false,
    "profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/1308874183791829001\/I1xq3QF1_normal.jpg",
    "profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/1308874183791829001\/I1xq3QF1_normal.jpg",
    "profile_link_color":"1DA1F2",
    "profile_sidebar_border_color":"C0DEED",
    "profile_sidebar_fill_color":"DDEEF6",
    "profile_text_color":"333333",
    "profile_use_background_image":true,
    "has_extended_profile":true,
    "default_profile":true,
    "default_profile_image":false,
    "following":false,
    "follow_request_sent":false,
    "notifications":false,
    "translator_type":"none"
  },
  "geo":null,
  "coordinates":null,
  "place":null,
  "contributors":null,
  "is_quote_status":false,
  "retweet_count":0,
  "favorite_count":0,
  "favorited":false,
  "retweeted":false,
  "lang":"en"
}
</pre></code>
 -->
<!-- {"created_at":"Wed Sep 23 23:28:22 +0000 2020","id":1308911113229209601,"id_str":"1308911113229209601","text":"Test tweet using the POST statuses\/update endpoint","truncated":false,"entities":{"hashtags":[],"symbols":[],"user_mentions":[],"urls":[]},"source":"","in_reply_to_status_id":null,"in_reply_to_status_id_str":null,"in_reply_to_user_id":null,"in_reply_to_user_id_str":null,"in_reply_to_screen_name":null,"user":{"id":1308873400757227521,"id_str":"1308873400757227521","name":"quinetweet","screen_name":"quinetweet","location":"","description":"","url":null,"entities":{"description":{"urls":[]}},"protected":false,"followers_count":0,"friends_count":0,"listed_count":0,"created_at":"Wed Sep 23 20:59:00 +0000 2020","favourites_count":0,"utc_offset":null,"time_zone":null,"geo_enabled":false,"verified":false,"statuses_count":1,"lang":null,"contributors_enabled":false,"is_translator":false,"is_translation_enabled":false,"profile_background_color":"F5F8FA","profile_background_image_url":null,"profile_background_image_url_https":null,"profile_background_tile":false,"profile_image_url":"http:\/\/pbs.twimg.com\/profile_images\/1308874183791829001\/I1xq3QF1_normal.jpg","profile_image_url_https":"https:\/\/pbs.twimg.com\/profile_images\/1308874183791829001\/I1xq3QF1_normal.jpg","profile_link_color":"1DA1F2","profile_sidebar_border_color":"C0DEED","profile_sidebar_fill_color":"DDEEF6","profile_text_color":"333333","profile_use_background_image":true,"has_extended_profile":true,"default_profile":true,"default_profile_image":false,"following":false,"follow_request_sent":false,"notifications":false,"translator_type":"none"},"geo":null,"coordinates":null,"place":null,"contributors":null,"is_quote_status":false,"retweet_count":0,"favorite_count":0,"favorited":false,"retweeted":false,"lang":"en"}
 -->
Okay so now let's quote tweet this

<code><pre>
twurl -d 'status=https://twitter.com/quinetweet/status/1308911113229209601' /1.1/statuses/update.json
</pre></code>

<blockquote class="twitter-tweet tw-align-center"><p lang="und" dir="ltr"><a href="https://t.co/FXps7y4yMw">https://t.co/FXps7y4yMw</a></p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1308912279853903872?ref_src=twsrc%5Etfw">September 23, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

Okay now let's take a look at these IDs

<code><pre>
for i in {1..2}; do twurl -d 'status=Quick succession test' /1.1/statuses/update.json; done
</pre></code>

Ah we're met with a warning about the second one being a duplicate...well that's not helpful

Simple let's add a variable

<code><pre>
for i in {1..2}; do twurl -d 'status=Quick succession test $i' /1.1/statuses/update.json; done
</pre></code>

Ah this is also getting the duplicate warning, what's going on?

<blockquote class="twitter-tweet tw-align-center"><p lang="en" dir="ltr">Quick succession test <a href="https://twitter.com/search?q=%24i&amp;src=ctag&amp;ref_src=twsrc%5Etfw">$i</a></p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1309237764035051520?ref_src=twsrc%5Etfw">September 24, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

How embarrrassing, we've accidentally linked to Intelsat's stock ticker. We should have used double quotes:

<code><pre>
for i in {1..2}; do twurl -d "status=Quick succession test $i" /1.1/statuses/update.json; done
</pre></code>

<blockquote class="twitter-tweet tw-align-center"><p lang="en" dir="ltr">Quick succession test 1</p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1309237975868469248?ref_src=twsrc%5Etfw">September 24, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet tw-align-center"><p lang="en" dir="ltr">Quick succession test 2</p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1309237977982345216?ref_src=twsrc%5Etfw">September 24, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

Finally! Now we can say we're programatically tweeting without completely lying

Tweet non-existant ID...

<h2>Shit gets weird</h2>

<blockquote class="twitter-tweet tw-align-center"><p lang="und" dir="ltr"><a href="https://t.co/WKJ360tAsR">https://t.co/WKJ360tAsR</a></p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1309821307643727872?ref_src=twsrc%5Etfw">September 26, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

I think I may have just found my new favourite content discovery mechanism—generating random tweet IDs and checking if they exist.
The song is <a href="https://youtu.be/XwPB9FrhqjI">Thundercat's Funny Thing</a>.

<h2>The Promised Land</h2>
Drumroll please
<blockquote class="twitter-tweet tw-align-center"><p lang="und" dir="ltr"><a href="https://t.co/MAbIwtoonW">https://t.co/MAbIwtoonW</a></p>&mdash; quinetweet (@quinetweet) <a href="https://twitter.com/quinetweet/status/1309951041321013248">September 26, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

Code is...

<h2>TL;DR</h2>
<p>
The usename doesn't matter when you're linking to a tweet, only the tweet ID!
So you can link to any tweet with a URL that would seem to be from any other account <a href="https://twitter.com/jack/status/1309951041321013248">https://twitter.com/jack/status/1309951041321013248</a> and you'll see Twitter replaces the username.
</p>

<!-- were there some that didn't have the same id that still resolved? -->
<!-- better in twitter app -->
<!-- Export tweets -->
<!-- Complain to twitter about quote tweet not displaying properly despite existing -->
<!-- trivial with edit button -->
</body>
</html>
